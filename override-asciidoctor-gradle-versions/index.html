<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0"><meta name="author" content="Sander Smeman"><meta name="robots" content="all"><title>Override asciidoctor gradle plugin versions</title><meta name="description" content="As development team we decided to write our documentation with Asciidoc.
As other parts in our landscape use gradle as the build tool, thus we opted for the asciidoctor-gradle-plugin to generate the documentation.
The documents have embedded plantuml d..."><meta name="keywords" content="documentation,plantuml,gradle,asciidoctor"><link rel="dns-prefetch" href="//fonts.googleapis.com"><link rel="dns-prefetch" href="//stackpath.bootstrapcdn.com"><link rel="dns-prefetch" href="//use.fontawesome.com"><link rel="dns-prefetch" href="//cdnjs.cloudflare.com"><script>if ('serviceWorker' in navigator) {
    window.addEventListener('load', function() {
        navigator.serviceWorker.register('/sw.js').then(function(registration) {
            // Registration was successful
            console.log('ServiceWorker registration successful with scope: ', registration.scope);
        }, function(err) {
            // registration failed :(
            console.log('ServiceWorker registration failed: ', err);
        });
    });
}
</script><link rel="alternate" type="application/rss+xml" title="thoughts.toString();" href="/atom.xml"><link rel="stylesheet" href="//use.fontawesome.com/releases/v5.6.3/css/all.css" integrity="sha384-UHRtZLI+pbxtHCWp1t77Bi1L4ZtiqrqD80Kn4Z8NTSRyMA2Fd33n5dQ8lWUE00s/" crossorigin="anonymous"><link rel="stylesheet" href="//fonts.googleapis.com/css?family=Encode+Sans:400,800|IBM+Plex+Serif:400,400i,700,700i&amp;display=swap"><link rel="stylesheet" href="/css/style.css?v=1"><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.13.1/styles/vs2015.min.css"><script>if (window.location.hostname !== 'localhost' && window.location.hostname !== '127.0.0.1') {
    (function (i, s, o, g, r, a, m) {
        i['GoogleAnalyticsObject'] = r;
        i[r] = i[r] || function () {
            (i[r].q = i[r].q || []).push(arguments)
        }, i[r].l = 1 * new Date();
        a = s.createElement(o),
            m = s.getElementsByTagName(o)[0];
        a.async = 1;
        a.src = g;
        m.parentNode.insertBefore(a, m)
    })(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');
    ga('create', 'UA-8287349-4', 'auto');
    ga('send', 'pageview');
}</script></head><body><nav class="navbar navbar-custom fixed-top navbar-expand-md"><a class="navbar-brand" href="/"><span>thoughts.toString();</span></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="true" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarSupportedContent"><ul class="navbar-nav ml-auto"><li class="nav-item"><a class="nav-link" href="/about">About</a></li><li class="nav-item"><a class="nav-link" href="/archives">Archive</a></li><li class="nav-item"><a class="nav-link" target="_blank" rel="noopener" href="https://github.com/SanderSmee/sandersmee.github.io">Github</a></li></ul></div></nav><header class="header-section"><div class="intro-header" style="background-image: url(//source.unsplash.com/dC6Pb2JdAqs);"><div class="container"><div class="row justify-content-center"><div class="col-lg-10 col-12"><div class="post-heading"><a class="category" href="/category/Howto/">Howto</a><h1>Override asciidoctor gradle plugin versions</h1><div class="post-meta"><ul class="list-inline"><li class="list-inline-item"><time datetime="2022-02-13T19:00:00.000Z" itemprop="datePublished">2022-02-13</time></li><li class="list-inline-item">3 minutes read</li></ul></div></div></div></div></div></div></header><main class="container"><div class="row justify-content-center"><div class="col-lg-10 col-12"><article class="blog-post" role="main"><p>As development team we decided to write our documentation with Asciidoc.
As other parts in our landscape use gradle as the build tool, thus we opted for the asciidoctor-gradle-plugin to generate the documentation.
The documents have embedded plantuml diagrams describing the architecture, but to our surprise the toolchain did not render them correctly.
Apparently the diagrams use features of plantuml that are not supported in the version provided by default by the toolchain.</p>
<p>We found out we had to update to later versions of asciidoctorj-diagram and plantuml.
The version of asciidoctor-gradle-plugin (3.3.2) is now about a year old (from February 2021) and probably its dependencies also.
Unfortunately it&#8217;s rather hard to find which versions are used by the asciidoctor-gradle plugin and how to update to newer versions.</p>
<span id="more"></span>
<section class="doc-section level-1"><h2>Finding the default versions</h2><p>Going over the <a target="_blank" rel="noopener" href="https://asciidoctor.github.io/asciidoctor-gradle-plugin/master/user-guide/">Asciidoctor Gradle Plugin</a> documentation you can read how to set the version of modules you intend to use.
But the documentation contains "only" a placeholder version, and not the actual (default) version.
Continuing the search leads to the asciidoctor-gradle-plugin <a target="_blank" rel="noopener" href="https://github.com/asciidoctor/asciidoctor-gradle-plugin/">source code on github</a>.
It contains a <a target="_blank" rel="noopener" href="https://github.com/asciidoctor/asciidoctor-gradle-plugin/blob/34837b18609821bd85c239453a3111d13c1e0d0a/module-versions.properties"><code>module-versions.properties</code></a> file that contains the version of modules used by the plugin suite.
Given this file you see the used version of asciidoctorj-diagram is <code>2.0.5</code>, and not the latest <code>2.2.1</code> as of writing.</p>
<figure class="listing-block"><figcaption>Listing 1. <code>build.gradle</code> snippet</figcaption>
<pre class="highlightjs highlight"><code class="language-gradle hljs" data-lang="gradle">plugins &#123;
  id 'org.asciidoctor.jvm.pdf' version '3.3.2'
  id 'org.asciidoctor.jvm.gems' version '3.3.2'
&#125;

asciidoctorj &#123;
  version '2.5.3' <b class="conum">1</b>
  modules &#123;
   diagram.use()
    diagram.version '2.2.1' <b class="conum">2</b>
  &#125;
&#125;
...</code></pre><ol class="callout-list arabic"><li>The version of asciidoctorj is also not the latest (2.4.1). Updated to <code>2.5.3</code>.</li><li>Update the version of asciidoctorj-diagram to <code>2.2.1</code> as that is the latest.</li></ol></figure>
</section>
<section class="doc-section level-1"><h2>Plantuml used needs an update</h2><p>With this you expected the beautiful plantuml diagrams you created, but alas still no success.</p>
<p>Version <code>2.2.1</code> of asciidoctorj-diagram a version of plantuml which also isn&#8217;t the latest greatest.
Digging further you can discover that asciidoctorj-diagram wraps the ruby gems asciidoctor-diagram and asciidoctor-diagram-plantuml, the latter wrapping plantuml.
The used version of asciidoctor-diagram-plantuml is declared in a <a target="_blank" rel="noopener" href="https://github.com/asciidoctor/asciidoctorj-diagram/blob/cd5816019d8769a9d5918c0082c45d7117ee979a/asciidoctorj-diagram-plantuml/gradle.properties"><code>gradle.properties</code></a> file and is version <code>1.2021.8</code>.
Using the <a target="_blank" rel="noopener" href="https://asciidoctor.github.io/asciidoctor-gradle-plugin/master/user-guide/#asciidoctorj-gems-plugin">Ruby GEM support</a> of the asciidoctor-gradle you can declare a dependency on the latest asciidoctor-diagram-plantuml gem <code>1.2022.1</code>.</p>
<figure class="listing-block"><figcaption>Listing 2. <code>build.gradle</code> snippet</figcaption>
<pre class="highlightjs highlight"><code class="language-gradle hljs" data-lang="gradle">...
repositories &#123;
  ruby.gems()
&#125;

dependencies &#123;
  asciidoctorGems 'rubygems:asciidoctor-diagram-plantuml:1.2022.1'  <b class="conum">1</b>
&#125;
...</code></pre><ol class="callout-list arabic"><li>Declare the dependency on the asciidoctor-diagram-plantuml gem.</li></ol></figure>

<p>Now you&#8217;re using the latest version of asciidoctorj-diagram and the latest version of plantuml.
The result is the beautiful diagrams as expected.</p>
<p>Written using gradle 7.3, asciidoctor-gradle 3.2.2,</p></section><section class="post-tags"><div><a class="tag post-meta badge badge-pill badge-primary" href="/tags/documentation/">#documentation</a><a class="tag post-meta badge badge-pill badge-primary" href="/tags/plantuml/">#plantuml</a><a class="tag post-meta badge badge-pill badge-primary" href="/tags/gradle/">#gradle</a><a class="tag post-meta badge badge-pill badge-primary" href="/tags/asciidoctor/">#asciidoctor</a></div></section></article><nav class="pagination justify-content-center" role="pagination"><li class="previous page-item"><a class="float-right page-link" href="/custom-attributes-in-spring-restdocs/">&larr; Previous post</a></li></nav></div></div></main><footer class="site-footer container-fluid"><div class="row justify-content-center"><div class="col-10"><div class="row"><section class="col-lg-4"><h5>thoughts.toString(); Â© 2022</h5><p><em>"My thoughts.toString(); For you to explore"</em></p><p>This work is licensed under a <a rel="license noopener" target="_blank" href="http://creativecommons.org/licenses/by-nc-sa/4.0/"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-nc-sa/4.0/80x15.png" /></a>
</p></section><section class="col-lg-4"><h5 class="marked">Recent articles</h5><div class="recent-posts"><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/override-asciidoctor-gradle-versions/">Override asciidoctor gradle plugin versions</a></li><li class="post-list-item"><a class="post-list-link" href="/custom-attributes-in-spring-restdocs/">Custom, optional attributes in spring-restdocs</a></li><li class="post-list-item"><a class="post-list-link" href="/testable-architecture/">Testable architecture</a></li></ul></div></section><section class="col-lg-4"><h5 class="marked">Stay connected</h5><div class="social-links"><ul class="list-inline"><li class="list-inline-item"><a href="/atom.xml" title="RSS" onclick="window.open(this.href);return false;"><span class="fas fa-rss"></span></a></li><li class="list-inline-item"><a target="_blank" rel="noopener" href="https://twitter.com/osusso" title="Twitter" onclick="window.open(this.href);return false;"><span class="fab fa-twitter"></span></a></li><li class="list-inline-item"><a target="_blank" rel="noopener" href="https://github.com/sandersmee/sandersmee.github.io" title="Github" onclick="window.open(this.href);return false;"><span class="fab fa-github"></span></a></li><li class="list-inline-item"><a href="mailto:sander.smeman@gmail.com" title="mail" onclick="window.open(this.href);return false;"><span class="fas fa-envelope"></span></a></li><li class="list-inline-item"><a target="_blank" rel="noopener" href="https://www.linkedin.com/in/sandersmeman/" title="linkedin" onclick="window.open(this.href);return false;"><span class="fab fa-linkedin"></span></a></li></ul></div><h5 class="marked">Meta</h5><ul class="list-inline"><li class="list-inline-item"><a href="/statistics">Statistics</a></li><li class="list-inline-item"><a target="_blank" rel="noopener" href="https://stats.uptimerobot.com/Q7LzzFqKE">Uptime</a></li></ul></section></div></div></div></footer><script src="//code.jquery.com/jquery-3.4.1.slim.min.js" integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n" crossorigin="anonymous"></script><script src="//cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script><script src="//stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script><script src="/js/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></body></html>