<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0"><meta name="author" content="Sander Smeman"><meta name="robots" content="all"><title>Testable architecture</title><meta name="description" content="My coworker points me to the presentation of Aslak Hellesøy, Sub-second acceptance tests.
As we&amp;#8217;re struggling with long running and brittle acceptance tests, that provoking title triggers my interest, and I start watching the recording&amp;#8230;&amp;#82..."><meta name="keywords" content="hexagonal,test"><link rel="dns-prefetch" href="//fonts.googleapis.com"><link rel="dns-prefetch" href="//stackpath.bootstrapcdn.com"><link rel="dns-prefetch" href="//use.fontawesome.com"><link rel="dns-prefetch" href="//cdnjs.cloudflare.com"><script>if ('serviceWorker' in navigator) {
    window.addEventListener('load', function() {
        navigator.serviceWorker.register('/sw.js').then(function(registration) {
            // Registration was successful
            console.log('ServiceWorker registration successful with scope: ', registration.scope);
        }, function(err) {
            // registration failed :(
            console.log('ServiceWorker registration failed: ', err);
        });
    });
}
</script><link rel="alternate" type="application/rss+xml" title="thoughts.toString();" href="/atom.xml"><link rel="stylesheet" href="//use.fontawesome.com/releases/v5.6.3/css/all.css" integrity="sha384-UHRtZLI+pbxtHCWp1t77Bi1L4ZtiqrqD80Kn4Z8NTSRyMA2Fd33n5dQ8lWUE00s/" crossorigin="anonymous"><link rel="stylesheet" href="//fonts.googleapis.com/css?family=Encode+Sans:400,800|IBM+Plex+Serif:400,400i,700,700i&amp;display=swap"><link rel="stylesheet" href="/css/style.css?v=1"><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.13.1/styles/vs2015.min.css"><script>if (window.location.hostname !== 'localhost' && window.location.hostname !== '127.0.0.1') {
    (function (i, s, o, g, r, a, m) {
        i['GoogleAnalyticsObject'] = r;
        i[r] = i[r] || function () {
            (i[r].q = i[r].q || []).push(arguments)
        }, i[r].l = 1 * new Date();
        a = s.createElement(o),
            m = s.getElementsByTagName(o)[0];
        a.async = 1;
        a.src = g;
        m.parentNode.insertBefore(a, m)
    })(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');
    ga('create', 'UA-8287349-4', 'auto');
    ga('send', 'pageview');
}</script></head><body><nav class="navbar navbar-custom fixed-top navbar-expand-md"><a class="navbar-brand" href="/"><span>thoughts.toString();</span></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="true" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarSupportedContent"><ul class="navbar-nav ml-auto"><li class="nav-item"><a class="nav-link" href="/about">About</a></li><li class="nav-item"><a class="nav-link" href="/archives">Archive</a></li><li class="nav-item"><a class="nav-link" target="_blank" rel="noopener" href="https://github.com/SanderSmee/sandersmee.github.io">Github</a></li></ul></div></nav><header class="header-section"><div class="intro-header" style="background-image: url(//source.unsplash.com/92dgYPsir9k);"><div class="container"><div class="row justify-content-center"><div class="col-lg-10 col-12"><div class="post-heading"><a class="category" href="/category/Architecture/">Architecture</a><h1>Testable architecture</h1><div class="post-meta"><ul class="list-inline"><li class="list-inline-item"><time datetime="2019-02-06T23:00:00.000Z" itemprop="datePublished">2019-02-07</time></li><li class="list-inline-item">3 minutes read</li></ul></div></div></div></div></div></div></header><main class="container"><div class="row justify-content-center"><div class="col-lg-10 col-12"><article class="blog-post" role="main"><p>My coworker points me to the presentation of Aslak Hellesøy, <a target="_blank" rel="noopener" href="https://www.youtube.com/watch?v=PE_1nh0DdbY">Sub-second acceptance tests</a>.
As we&#8217;re struggling with long running and brittle acceptance tests, that provoking title triggers my interest, and I start watching the recording&#8230;&#8203;</p>
<a id="more"></a>
<p>The most interesting thing about the talk is not the speed of the tests, but of course how to accomplish faster tests.
Less surprising might be that there isn&#8217;t a lightning fast (test) framework that can deliver the sub-second tests.
And also that there&#8217;s no magical trick to get those tests so fast.
Getting to fast acceptance tests has all to do with good software architecture practices.</p>
<section class="doc-section level-1"><h2>Composing software</h2><p>Being able to exchange certain parts of your system can make that system easier to test.
If the parts you can replace contain the bounds of the system, then those bounds can temporarily be put aside.
The bounds we&#8217;re referring to are the IO-bounds of a system, for example a HTTP call to the system, or a connection the system has to a database.</p>
<p>For parts of your system to be easy replaceable, they need well thought of interfaces or (API) contracts.
This correspondents to the <em>Liskov substitution principle</em> one of the <a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/SOLID">SOLID</a> principles.
An IO-bound implementation of that contract could be replaced with a mock or stub without altering the correctness of that subpart of the system.</p></section>
<section class="doc-section level-1"><h2>Acceptance tests</h2><p>Secondly is that acceptance test descriptions should be decoupled from how they interact with the system under test.
When those test contain only functional or business language, it&#8217;s up to a framework like cucumber to connect those descriptions to the system to test.
And that, combined with the API or interfaces of the business domain, let&#8217;s you choose what parts of the system you want during the execution of the tests.</p></section>
<section class="doc-section level-1"><h2>Testable architecture</h2><p>Aslak recommends the talk <a target="_blank" rel="noopener" href="https://www.youtube.com/watch?v=Fk4rCn4YLLU">End to end functional tests that can run in milliseconds</a> by Nat Pryce.
Nat mentions the software architecture that enables these abilities: <a target="_blank" rel="noopener" href="https://web.archive.org/web/20180822100852/http://alistair.cockburn.us/Hexagonal+architecture">hexagonal architecture</a>.
He has written before about testing well architected software in <a target="_blank" rel="noopener" href="http://www.natpryce.com/articles/000772.html">Visualising Test Terminology</a>.
These ideas are repeated by Aslak in his previous talk <a target="_blank" rel="noopener" href="https://www.youtube.com/watch?v=uwH83PjR98g">Testable Architectures</a>.</p></section>
<section class="doc-section level-1"><h2>Conclusion</h2><p>So, if you want you your tests to be easier to write and faster to execute, it&#8217;s important to have an architecture that supports that.
Hexagonal architecture does that by separating technical and business concerns.
When you also keep technical concerns out of your acceptance tests, you may connect those directly to the business interfaces of the system.
Thereby avoiding the technical, and usually slowest, part of the system, to increase the speed of acceptance test execution.</p></section><section class="post-tags"><div><a class="tag post-meta badge badge-pill badge-primary" href="/tags/hexagonal/">#hexagonal</a><a class="tag post-meta badge badge-pill badge-primary" href="/tags/test/">#test</a></div></section></article><nav class="pagination justify-content-center" role="pagination"><li class="previous page-item"><a class="float-right page-link" href="/reduce-code-noise-ratio-maven-poms/">&larr; Previous post</a></li><li class="next page-item"><a class="float-left page-link" href="/custom-attributes-in-spring-restdocs/">Next post &rarr;</a></li></nav></div></div></main><footer class="site-footer container-fluid"><div class="row justify-content-center"><div class="col-10"><div class="row"><section class="col-lg-4"><h5>thoughts.toString(); © 2022</h5><p><em>"My thoughts.toString(); For you to explore"</em></p><p>This work is licensed under a <a rel="license noopener" target="_blank" href="http://creativecommons.org/licenses/by-nc-sa/4.0/"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-nc-sa/4.0/80x15.png" /></a>
</p></section><section class="col-lg-4"><h5 class="marked">Recent articles</h5><div class="recent-posts"><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/override-asciidoctor-gradle-versions/">Override asciidoctor gradle plugin versions</a></li><li class="post-list-item"><a class="post-list-link" href="/custom-attributes-in-spring-restdocs/">Custom, optional attributes in spring-restdocs</a></li><li class="post-list-item"><a class="post-list-link" href="/testable-architecture/">Testable architecture</a></li></ul></div></section><section class="col-lg-4"><h5 class="marked">Stay connected</h5><div class="social-links"><ul class="list-inline"><li class="list-inline-item"><a href="/atom.xml" title="RSS" onclick="window.open(this.href);return false;"><span class="fas fa-rss"></span></a></li><li class="list-inline-item"><a target="_blank" rel="noopener" href="https://twitter.com/osusso" title="Twitter" onclick="window.open(this.href);return false;"><span class="fab fa-twitter"></span></a></li><li class="list-inline-item"><a target="_blank" rel="noopener" href="https://github.com/sandersmee/sandersmee.github.io" title="Github" onclick="window.open(this.href);return false;"><span class="fab fa-github"></span></a></li><li class="list-inline-item"><a href="mailto:sander.smeman@gmail.com" title="mail" onclick="window.open(this.href);return false;"><span class="fas fa-envelope"></span></a></li><li class="list-inline-item"><a target="_blank" rel="noopener" href="https://www.linkedin.com/in/sandersmeman/" title="linkedin" onclick="window.open(this.href);return false;"><span class="fab fa-linkedin"></span></a></li></ul></div><h5 class="marked">Meta</h5><ul class="list-inline"><li class="list-inline-item"><a href="/statistics">Statistics</a></li><li class="list-inline-item"><a target="_blank" rel="noopener" href="https://stats.uptimerobot.com/Q7LzzFqKE">Uptime</a></li></ul></section></div></div></div></footer><script src="//code.jquery.com/jquery-3.4.1.slim.min.js" integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n" crossorigin="anonymous"></script><script src="//cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script><script src="//stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script><script src="/js/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></body></html>